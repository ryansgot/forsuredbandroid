<migrations>
    <migration db_version="1" table_name="profile_info" migration_type="CREATE_TABLE" query="CREATE TABLE profile_info(_id INTEGER PRIMARY KEY, created DATETIME DEFAULT CURRENT_TIMESTAMP, deleted INTEGER DEFAULT 0, modified DATETIME DEFAULT CURRENT_TIMESTAMP);" />
    <migration db_version="1" table_name="profile_info" migration_type="CREATE_TABLE" query="CREATE TRIGGER profile_info_updated_trigger AFTER UPDATE ON profile_info BEGIN UPDATE profile_info SET modified=CURRENT_TIMESTAMP WHERE _id=NEW._id; END;" column="_id" column_type="long" is_last_in_set="true" />
    <migration db_version="1" table_name="user" migration_type="CREATE_TABLE" query="CREATE TABLE user(_id INTEGER PRIMARY KEY, created DATETIME DEFAULT CURRENT_TIMESTAMP, deleted INTEGER DEFAULT 0, modified DATETIME DEFAULT CURRENT_TIMESTAMP);" />
    <migration db_version="1" table_name="user" migration_type="CREATE_TABLE" query="CREATE TRIGGER user_updated_trigger AFTER UPDATE ON user BEGIN UPDATE user SET modified=CURRENT_TIMESTAMP WHERE _id=NEW._id; END;" column="_id" column_type="long" is_last_in_set="true" />
    <migration db_version="1" table_name="user" migration_type="ALTER_TABLE_ADD_COLUMN" query="ALTER TABLE user ADD COLUMN global_id INTEGER;" column="global_id" column_type="long" is_last_in_set="true" />
    <migration db_version="1" table_name="user" migration_type="ALTER_TABLE_ADD_COLUMN" query="ALTER TABLE user ADD COLUMN app_rating REAL;" column="app_rating" column_type="double" is_last_in_set="true" />
    <migration db_version="1" table_name="user" migration_type="ALTER_TABLE_ADD_COLUMN" query="ALTER TABLE user ADD COLUMN competitor_app_rating REAL;" column="competitor_app_rating" column_type="java.math.BigDecimal" is_last_in_set="true" />
    <migration db_version="1" table_name="profile_info" migration_type="ALTER_TABLE_ADD_COLUMN" query="ALTER TABLE profile_info ADD COLUMN email_address TEXT;" column="email_address" column_type="java.lang.String" is_last_in_set="true" />
    <migration db_version="1" table_name="profile_info" migration_type="ALTER_TABLE_ADD_COLUMN" query="ALTER TABLE profile_info ADD COLUMN binary_data BLOB;" column="binary_data" column_type="byte[]" is_last_in_set="true" />
    <migration db_version="1" table_name="user" migration_type="ALTER_TABLE_ADD_COLUMN" query="ALTER TABLE user ADD COLUMN login_count INTEGER;" column="login_count" column_type="int" is_last_in_set="true" />
    <migration db_version="1" table_name="profile_info" migration_type="ADD_FOREIGN_KEY_REFERENCE" query="DROP TABLE IF EXISTS temp_profile_info;" />
    <migration db_version="1" table_name="profile_info" migration_type="ADD_FOREIGN_KEY_REFERENCE" query="CREATE TEMP TABLE temp_profile_info AS SELECT _id, created, deleted, modified, binary_data, email_address FROM profile_info;" />
    <migration db_version="1" table_name="profile_info" migration_type="ADD_FOREIGN_KEY_REFERENCE" query="DROP TABLE IF EXISTS profile_info;" />
    <migration db_version="1" table_name="profile_info" migration_type="ADD_FOREIGN_KEY_REFERENCE" query="CREATE TABLE profile_info(_id INTEGER PRIMARY KEY, created DATETIME DEFAULT CURRENT_TIMESTAMP, deleted INTEGER DEFAULT 0, modified DATETIME DEFAULT CURRENT_TIMESTAMP, user_id INTEGER, FOREIGN KEY(user_id) REFERENCES user(_id) ON UPDATE CASCADE ON DELETE CASCADE);" />
    <migration db_version="1" table_name="profile_info" migration_type="ADD_FOREIGN_KEY_REFERENCE" query="CREATE TRIGGER profile_info_updated_trigger AFTER UPDATE ON profile_info BEGIN UPDATE profile_info SET modified=CURRENT_TIMESTAMP WHERE _id=NEW._id; END;" />
    <migration db_version="1" table_name="profile_info" migration_type="ADD_FOREIGN_KEY_REFERENCE" query="ALTER TABLE profile_info ADD COLUMN binary_data BLOB;" />
    <migration db_version="1" table_name="profile_info" migration_type="ADD_FOREIGN_KEY_REFERENCE" query="ALTER TABLE profile_info ADD COLUMN email_address TEXT;" />
    <migration db_version="1" table_name="profile_info" migration_type="ADD_FOREIGN_KEY_REFERENCE" query="INSERT INTO profile_info SELECT _id, created, deleted, modified, null AS user_id, binary_data, email_address FROM temp_profile_info;" />
    <migration db_version="1" table_name="profile_info" migration_type="ADD_FOREIGN_KEY_REFERENCE" query="DROP TABLE IF EXISTS temp_profile_info;" foreign_key_update_action="CASCADE" foreign_key_table="user" foreign_key_delete_action="CASCADE" column="user_id" column_type="long" foreign_key_column="_id" is_last_in_set="true" />
</migrations>